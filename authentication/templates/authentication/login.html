<!DOCTYPE html>
<html>

<head>
	<title>Log in to MyAlmanack</title>
	<script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-auth.js"></script>
	<script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
	<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
	<script type="text/javascript">
		firebase.initializeApp({
			apiKey: "AIzaSyAitaYXstZ4YaaN4Y53qID9zuaerCAy-Z0",
			authDomain: "myalmanack.firebaseapp.com",
			databaseURL: "https://myalmanack.firebaseio.com",
			projectId: "myalmanack",
			storageBucket: "myalmanack.appspot.com",
			messagingSenderId: "616767068315"
		});
		var auth = firebase.auth(); auth.useDeviceLanguage();
		new firebaseui.auth.AuthUI(auth).start("#firebase_dialog", {
			signInOptions: [
				firebase.auth.GoogleAuthProvider.PROVIDER_ID,
				firebase.auth.FacebookAuthProvider.PROVIDER_ID,
				firebase.auth.TwitterAuthProvider.PROVIDER_ID,
				firebase.auth.GithubAuthProvider.PROVIDER_ID,
				firebase.auth.EmailAuthProvider.PROVIDER_ID,
				firebase.auth.PhoneAuthProvider.PROVIDER_ID,
			],
			callbacks: {
				signInSuccessWithAuthResult: function () {
					auth.currentUser.getIdToken(true).then(function (idToken) {
						document.querySelector("#firebase_idtoken").value = idToken;
						document.querySelector("#firebase_form").submit();
					}).catch(document.location.reload);
				}
			}
		});
	</script>
</head>

<body>
	<div id="firebase_dialog"></div>
	<form id="firebase_form" method="POST" style="display: none">
		{% csrf_token %}
		<input id="firebase_idtoken" name="firebase_idtoken" type="hidden">
	</form>
</body>

</html>